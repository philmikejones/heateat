fpl <- read.csv("data/fp-lsoa.csv")
View(fpl)
fpl <- read.csv("data/fp-lsoa.csv", skip = 2, header = T)
View(fpl)
fp10 <- read.csv("data/fp10.csv", skip = 2, header = T)
View(fp10)
fplihc <- read.csv("data/fplihc.csv", skip = 2, header = T)
View(fplihc)
fplihc <- read.csv("data/fplihc.csv", skip = 2, header = T)
View(fplihc)
ru     <- read.csv("data/RUC11_LSOA11_EW.csv")
View(ru)
ru     <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
View(ru)
ru$rural <- 0
View(ru)
if(ru$RUC11CD[1, ] == D1 | ru$RUC11CD[1, ] == E1 |
ru$RUC11CD[1, ] == D2 | ru$RUC11CD[1, ] == E2) {
ru$rural[1, ] <- 1
}
if(ru$RUC11CD[1, ] == D1 | E1 |  D2 |  E2) {
ru$rural[1, ] <- 1
}
if(ru$RUC11CD[1, ] == "D1" | "E1" | "D2" | "E2") {
ru$rural[1, ] <- 1
}
ru <- as.matrix(ru)
if(ru$RUC11CD[1, ] == "D1" | "E1" | "D2" | "E2") {
ru$rural[1, ] <- 1
}
View(ru)
if(ru$RUC11CD[1, ] == "D1") {
ru$rural[1, ] <- 1
}
ru     <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru$rural <- 0
if(ru$RUC11CD[1, ] == "D1") {
ru$rural[1, ] <- 1
}
if(ru$RUC11CD[1, ] == "D1") {
ru$rural <- 1
}
fp10   <- read.csv("data/fp10.csv", skip = 2, header = T)
fplihc <- read.csv("data/fplihc.csv", skip = 2, header = T)
ru     <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
View(ru)
View(fp10)
View(fplihc)
View(ru)
ru <- subset(ru, select = -LSOA11NM)
View(ru)
ru <- ru[ru$RUC11CD == "D1" || "D2" || "E1" || "E2"]
ru <- ru[ru$RUC11CD == "D1" || ru$RUC11CD == "D2" ||
ru$RUC11CD == "E1" || ru$RUC11CD == "E2"]
View(ru)
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, select = -LSOA11NM)
ru <- ru[ru$RUC11CD == "D1" ]
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, select = -LSOA11NM)
View(ru)
ru <- subset(ru, ru$RUC11CD == "D1")
View(ru)
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, select = -LSOA11NM)
ru <- subset(ru, ru$RUC11CD == "D1" || ru$RUC11CD == "D2" ||
ru$RUC11CD == "E1" || ru$RUC11CD == "E2"]
ru <- subset(ru, ru$RUC11CD == "D1" || ru$RUC11CD == "D2" ||
ru$RUC11CD == "E1" || ru$RUC11CD == "E2")
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, select = -LSOA11NM)
ru <- subset(ru, ru$RUC11CD == "D1" & ru$RUC11CD == "D2" &
ru$RUC11CD == "E1" & ru$RUC11CD == "E2")
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, select = -LSOA11NM)
ru <- subset(ru, ru$RUC11CD == "D1" || "D2")
ru <- subset(ru, RUC11CD == "D1")
View(ru)
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, select = -LSOA11NM)
ru <- subset(ru, RUC11CD == "D1" || RUC11CD == "D2")
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, select = -LSOA11NM)
ru <- subset(ru, RUC11CD == "D1" && RUC11CD == "D2")
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, select = -LSOA11NM)
ru <- subset(ru, RUC11CD == c("D1", "D2")
)
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, RUC11CD == "D1" &
RUC11CD == "D2" &
RUC11CD == "E1" &
RUC11CD == "E2",
select = -"LSOA11NM")
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, RUC11CD == "D1" &
RUC11CD == "D2" &
RUC11CD == "E1" &
RUC11CD == "E2",
select = -LSOA11NM)
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
ru <- subset(ru, RUC11CD == "D1" |
RUC11CD == "D2" |
RUC11CD == "E1" |
RUC11CD == "E2",
select = -LSOA11NM)
View(ru)
View(ru)
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
View(fp10)
View(ru)
fp10 <- merge(fp10, ru, by.x = "LSOA.Code", by.y = "LSOA11CD")
View(fp10)
fp10 <- subset(fp10, select = c("LSOA.Code", "Estimated.number.of.households",
"Estimated.number.of.Fuel.Poor.Households",
"RUC11CD", "RUC11"))
View(fp10)
fp10 <- subset(fp10, RUC11CD == "D1" | RUC11CD == "D2" |
RUC11CD == "E1" | RUC11CD == "E2",)
View(fp10)
fplihc <- merge(fplihc, ru, by.x = "LSOA.Code", by.y = "LSOA11CD")
View(fplihc)
fplihc <- subset(fplihc, select = c("LSOA.Code",
"Estimated.number.of.households",
"Estimated.number.of.Fuel.Poor.Households",
"RUC11CD",  "RUC11"))
View(fplihc)
fplihc <- subset(fplihc, RUC11CD == "D1" | RUC11CD == "D2" |
RUC11CD == "E1" | RUC11CD == "E2")
View(fplihc)
source('~/gits/heateat/scripts/fp-lsoa.R', echo=TRUE)
rm(ru)
View(fp10)
require("maptools")
require("rgeos")
require("rgdal")
require("scales")
require("ggplot2")
lsoa <- readOGR(dsn = "../../Boundary Data/LSOAs/eng-lsoa-2011/england_lsoa_2011Polygon")
lsoa <- readOGR(dsn = "../../Boundary Data/LSOAs/eng-lsoa-2011",
"england_lsoa_2011Polygon")
proj4string(lsoa) <- CRS("+init=epsg:27700")
code
lsoa@data
names(lsoa@data)
lsoaf <- fortify(lsoa, region = "code")
lsoaf <- merge(lsoaf, lsoa@data, by.x = "id", by.y = "code")
ggplot(lsoaf, aes(long, lat, group = group)) + geom_polygon() + coord_equal()
names(lsoaf@.Data)
names(lsoaf@names)
names(lsoaf@row.names)
names(lsoaf@.S3Class)
head(lsoaf)
m <- ggplot(lsoaf, aes(long, lat, group = group))
ggplot(m) + geom_polygon() + coord_equal()
m + geom_polygon() + coord_equal()
# Prepare FP/RU data ====
# Two different fuel poverty definitions, 10% and 'Low Income High Cost'
# Treat each separately
fp10   <- read.csv("data/fp10.csv", skip = 2, header = T)
fplihc <- read.csv("data/fplihc.csv", skip = 2, header = T)
# Add in rural classification; remove urban
ru <- read.csv("data/RUC11_LSOA11_EW.csv", header = T)
fp10 <- merge(fp10, ru, by.x = "LSOA.Code", by.y = "LSOA11CD")
fp10 <- subset(fp10, select = c("LSOA.Code", "Estimated.number.of.households",
"Estimated.number.of.Fuel.Poor.Households",
"RUC11CD", "RUC11"))
# fp10 <- subset(fp10, RUC11CD == "D1" | RUC11CD == "D2" |
#                  RUC11CD == "E1" | RUC11CD == "E2")
fplihc <- merge(fplihc, ru, by.x = "LSOA.Code", by.y = "LSOA11CD")
fplihc <- subset(fplihc, select = c("LSOA.Code",
"Estimated.number.of.households",
"Estimated.number.of.Fuel.Poor.Households",
"RUC11CD",  "RUC11"))
# fplihc <- subset(fplihc, RUC11CD == "D1" | RUC11CD == "D2" |
#                    RUC11CD == "E1" | RUC11CD == "E2")
rm(ru)
require("maptools")
require("rgeos")
require("rgdal")
require("scales")
require("ggplot2")
source('~/gits/heateat/scripts/fp-lsoa.R', echo=TRUE)
source('~/gits/heateat/scripts/fp-lsoa.R', echo=TRUE)
source('~/gits/heateat/scripts/fp-lsoa.R', echo=TRUE)
install.packages(c("Cairo", "cairoDevice"))
m <- ggplot(lsoaf, aes(long, lat, group = group,
fill = Estimated.number.of.Fuel.Poor.Households(reverse = T)))
require("ggplot2")
require("maptools")
require("rgeos")
require("rgdal")
require("scales")
require("ggplot2")
m <- ggplot(lsoaf, aes(long, lat, group = group,
fill = Estimated.number.of.Fuel.Poor.Households(reverse = T)))
m + geom_polygon() + coord_equal()
m <- ggplot(lsoaf, aes(long, lat, group = group,
fill = Estimated.number.of.Fuel.Poor.Households)
)
m + geom_polygon() + coord_equal() + scale_fill_grey()
